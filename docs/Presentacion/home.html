<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Cap-and-trade in Energy Capacity Investment when the planner is inattentive</title>
    <meta charset="utf-8" />
    <meta name="author" content="Cea-Echenique, Feijoo and Muñoz" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <script src="libs/fabric/fabric.min.js"></script>
    <link href="libs/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link rel="stylesheet" href="beamer.css" type="text/css" />
    <link rel="stylesheet" href="beamer-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Cap-and-trade in Energy Capacity Investment when the planner is inattentive
]
.author[
### Cea-Echenique, Feijoo and Muñoz
]
.institute[
### U. Andes, PUCV
]
.date[
### July 2022<br/><br/> last update 2022-07-15
]

---





# Outline

.pull-left[
- [Motivation](#motivation)
- [Model](#model)
- [Results](#results)
]

 


---
name: motivation
# Motivation

- Decarbonization
  - Contrast Tax versus Cap-and-trade
  - Carbon pricing
- Environment resposability as an attention problem

---
name: literature
# Literature

- 2-stage stochastic capacity investment problems

([Ehrenmann and Smeers, 2011b](#bib-ehrenmann_stochastic_2011); [Abada, de Maere d ' Aertrycke, and Smeers, 2017](#bib-abada_multiplicity_2017); [de Maere d ' Aertrycke, Ehrenmann, Ralph, et al., 2017](#bib-de_maere_d__aertrycke_risk_2017))
- Re-trading: [Amigo, Cea-Echenique, and Feijoo (2021)](#bib-amigo_two_2021)
- Investment segmentation: [Cea-Echenique and Torres-Martínez (2018)](#bib-cea-echenique_general_2018)
- Rational Inattention: [Dewan and Neligh (2020)](#bib-dewan_estimating_2020)
---
name: model
# Model

&lt;img src="Fig1.png" width="80%" style="display: block; margin: auto;" /&gt;
.pull-left[
- `\(\bar t\)` periods indexed by `\(T\)`
- `\(\Omega\)` finite set of states of nature
]

.pull-right[
- `\(P\)` allowance long position
- `\(V\)` allowance short position
]
---
name: demand
# Demand

In the first stage period `\(t=0\)`, 

- Exogenous demand `\(D(0)\in\mathbb{R}_+\)`. 

In the second stage `\(t\in T:=\{1,...\bar{t}\}\)`, `\(\omega\in\Omega\)`
- Probability `\(Pr(\omega)\in[0,1]\)`. 
- Exogenous stochastic demand level `\(D(t,\omega)\in\mathbb{R}_+^{T\times\Omega}\)`,  `\(D=\left(D(0),(D(t,\omega))_{(t,\omega)\in T\times\Omega}\right)\in\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\)`.
---
name: producers
# Producers: first stage

`\(t=0\)`, each producer `\(i\)` chooses 
- `\(Q_i(t)\in\mathbb{R}_+\)` generation quantity such that their revenue is maximized price `\(\pi^d(0)\in\mathbb{R}_+\)`
- `\(\bar{Q}_i\)` installed capacity for each producer at `\(t=0\)`
- `\(A_i\in\mathbb{R}_+\)` carbon allowances  at a price `\(\pi^{a}\in\mathbb{R}_+\)`
- `\(x_i(t)\in\mathbb{R}_+\)` additional capacity  with a capital expenditure of `\(I_i\in\mathbb{R}_+\)` (The additional capacity becomes available after a predefined building time (in years))
---
name: producers2
# Producers: second stage

In the second stage, for each pair `\((t,\omega)\)`, producer `\(i\)` maximizes its profit by choosing 
- `\(Q_i(t,\omega)\in\mathbb{R}_+\)` the generation level at a price `\(\pi^d(t,\omega)\in\mathbb{R}_+\)`
- `\(TC_i(t) \in\mathbb{R}_+\)` technology change that adjusts the marginal cost of different technologies. 
- `\(x_i(t,\omega)\in\mathbb{R}_+\)` additional capacity  with an investment cost of `\(TCR_i(t)\cdot I_i\)`, where `\(TCR_i(t)\in\mathbb{R}_+\)` is the change in the investment cost or capital expenditure over time
- `\(P_i(\omega)\in\mathbb{R}_+\)` long position in permits from other producers if they need to surpass the initial allowances allocation `\(A_i\)`
- `\(V_i(\omega)\in\mathbb{R}_+\)` short position in allowances
- `\(\pi^v(\omega)\in\mathbb{R}_+\)` permits retrade price
---
name: producers3
# Producers

The choice set of the producer `\(i\)` over a time horizon of `\(\bar{t}\)` years is given by: 
- an amount of capacity expansion `\(x_i:=\left(x_i(0),(x_i(t,\omega))_{(t,\omega)\in T\times\Omega}\right)\in\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\)`, 
- a production plan `\(Q_i:=\left(Q_{i}(0),(Q_{i}(t,\omega)_{(t,\omega)\in T\times\Omega})\right)\in\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\)`, 
- allowances `\(A_i\in\mathbb{R}_+\)` bought in the first period `\(t=0\)`, 
- allowances `\(P_i(\omega)\in\mathbb{R}_+^{\Omega}\)` bought in `\(t=1\)` for time interval `\(t\in[1,\bar{t}]\)`
- allowances `\(V_i(\omega)\in\mathbb{R}_+^{\Omega}\)` sold in `\(t=1\)` for time interval `\(t\in[1,\bar{t}]\)`.

Given electricity prices `\(\pi^d:=\left(\pi^d(0),\left(\pi^d(t,\omega)\right)_{(t,\omega)\in T\times\Omega}\right)\in\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\)` and parameters `\((a_i,b_i)_{i\in\{1,...N\}}\in(\mathbb{R}^2_+)^N\)`, `\(f_i(p,q)=\Big(a_i\cdot q+\frac{b_i}{2}\cdot q^{2}\Big)-p\cdot q\)` revenue function.
---
name: producers4
# Producers: Objective

Defining `\(T_0:=\{0\}\cup T\)`, the optimization problem of producer `\(i\)` is given by choosing
`\((x_i,Q_i, A_i,P_i,V_i)\in\mathbb{X}:=\left(\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\right) \times\left(\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\right) \times \mathbb{R}_+\times\mathbb{R}_+^{\Omega}\times\mathbb{R}_+^{\Omega}\)` given prices `\((\pi^d\)`, `\(\pi^a\)` , `\(\pi^v)\in\Pi:=\left(\mathbb{R}_+\times\mathbb{R}_+^{T\times\Omega}\right)\times\mathbb{R}_+\times\mathbb{R}^{\Omega}_+\)` and parameters `\(\left((a_i,b_i),I_i, TC_i(t,\omega), TCR_i(t,\omega), CF_i,\bar{Q}_i, RP_i , \varepsilon_i\right)\in \Xi:=\mathbb{R}_+^2\times\mathbb{R}_+^7\)`, `\(\tau\in \mathbb{R}_+\)` and probability `\((Pr(\omega))_{\omega\in\Omega}\in\Delta:=\left\{\left(Pr(\omega)\right)_{\omega\in\Omega}\in[0,1]^K:\sum_{\omega\in\Omega}Pr(\omega)=1\right\}\)` as a solution of

`$$\min_{(x_i,Q_i,A_i,P_i,V_i)\in \mathbb{X}}   f_i \big( \pi^d(0),Q_i(0)\big)+ A_i \pi^{a} + I_i x_i(0)$$`

`$$+ \sum_{\omega} Pr(\omega)   \Bigg[ \sum_{t&gt;0} \frac{1}{(1+R)^t} \Big[ TC_i(t)\cdot f_i \big( \pi^d(t,\omega),Q_i(t,\omega) \big)$$`

$$+ TCR_i(t) \cdot I_i\cdot x_i(t,\omega) \Big] + \pi^v(\omega)\cdot \big(P_i(\omega)-V_i(\omega)\big) \Bigg] $$
---
name:prodrest
# Producers: Restrictions

`$$\Big(CF_i \cdot\tau\Big)  \Bigg[\bar{Q}_i + x_i(0)+\sum_{t^{\prime}&lt;t-lag_i} x_i(t^\prime,\omega) \Bigg] - Q_i(t,\omega) \geq 0   \quad \forall \quad i,\omega, t  &gt; 0  \quad (\alpha_{i,\omega,t})$$`

`$$(CF_i\cdot\tau)\bar{Q}_i-Q_i(0)\geq 0 \qquad \forall \quad i\quad (\kappa_i)$$`
`$$RP_i - \bar{Q}_i - x_i(0) - \sum_{t &gt; 0} x_i(t,\omega) \geq 0  \qquad \forall \quad i,\omega       \quad (\psi_{i,\omega})$$`

`$$A_{i}-V_i(\omega)\geq  0 \qquad \forall \quad i,\omega \quad (\beta_{i,\omega})$$`

`$$A_{i} + (P_i(\omega) - V_i(\omega))-\sum_{t&gt;0}Q_i(t, \omega)\cdot \varepsilon_{i}-Q_i(0)\varepsilon_{i}           \geq  0  \qquad \forall \quad i, \omega     \quad (\gamma_{i,\omega})$$`
---
name: auctioneer
# Auctioneer: Amigo et alii (2021)

- `\(\theta\in \mathbb{R}_+\)` available allowances at a price `\(\pi^a\)` in stage `\(t=0\)`. 
- The price is set such that it clears the `\(CO_2\)` permit market among generators and the auctioneer. 
- `\(CAP\in\mathbb{R}_+\)` carbon budget (maximum level of `\(CO_2\)` emissions allowed in the second stage `\(t\in T\)`) and is drawn from a normal distribution, i.e., `\(CAP \thicksim N(\mu, \sigma^2)\)`.

`$$Pr(\theta \geq CAP) \leq \epsilon$$`

- Objective
`$$\min_{\theta} -\theta \pi^{a}  + \mathcal{F}(\theta)\quad\text{s.t }\quad\phi^{-1}(\epsilon) \sigma + \mu - \theta  \geq 0$$`
---
name: equilibrium
# Equilibrium

The data that parameterize the capacity investment model is given by the tuple `$$\left(\tau,(Pr(\omega))_{\omega\in\Omega},\left(CAP,\mu,\sigma,\epsilon\right),\left((a_i,b_i),I_i, TC_i(t,\omega), TCR_i(t,\omega), CF_i,\bar{Q}_i, RP_i , \varepsilon_i\right)_{i\in N}\right)$$`
`$$\in \mathbb{R}_+\times \Delta\times\mathbb{R}_+^4\times\Xi^N,$$`

**DEFINITION.** An equilibrium in the capacity investment model is a vector of prices and production decisions `$$\left((\pi^{d*},\pi^{a*},\pi^{v*}),(x_i^*,Q_i^*,A_i^*,P_i^*,V_i^*)_{i\in\{1,...,N\}},\theta^*\right)\in\Pi\times\mathbb{X}^N \times \mathbb{R}_+$$` such that:
---
name: eqcond
# Equilibrium: conditions

- `\((x_i^*,Q_i^*,A_i^*,P_i^*,V_i^*)\)` minimizes the cost for each producer  `\(i\in\{1,...,N\}\)`
- `\(\theta^*\)` minimizes the auctioneer cost
- Market clearing conditions are satisfied:

.pull-left.small[
- available allowances `\(t=0\)`
`$$\sum_{i} A_{i}^* = \theta   \ \  (\pi^{a*})$$`
- equilibrium in trading market `\(t&gt;0\)`
`$$\sum_{i} P_{i,\omega}^* = \sum_{i} V_{i,\omega}^*  \forall \ \omega  \ \ \left(\pi^{v*}(\omega)\right)$$`
]

.pull-right.small[

- fulfillment of the demand --first stage
`$$\sum_{i} Q_i(0)^* = D(0), \ \ (\pi^{d*}(0))$$`
- fulfillment of the demand --second stage
`$$\sum_{i} Q_i(t,\omega)^* = D(t,\omega),  \forall \ \omega, t \quad(\pi^{d*}(t,\omega))$$` 
]  
---
name: attention
# Rational Inattention

Following [Dewan and Neligh (2020)](#bib-dewan_estimating_2020) we consider a quadratic cost function

`$$C(P)=\begin{cases}0,&amp;Perf\leq d\\c(Perf-d)^2,&amp;Perf&gt;d\end{cases},$$`

where `\(Perf\in[0,1]\)` is a performance metric, `\(c\)` an associated marginal cost and `\(d\)` the performance level wiht public information.

We drop the chance constraint approach, by using

- `\(\min_{(\theta,Perf)\in[0,(1+\epsilon)CAP]\times[0,1]}-\theta\pi^aPerf+c(Perf-d)^2\)` profit oriented
- `\(\min_{\theta\in[0,CAP]}-\theta\pi^a+c\left(1-\frac{|\theta-CAP|}{CAP}-d\right)^2\)` welfare oriented
---
name: results
# Results: Profit oriented
.pull-left[
- Calibration wrt [Amigo, Cea-Echenique, and Feijoo (2021)](#bib-amigo_two_2021)
  - CAP: `\(100 MtCO_2\)`
  - `\(\pi^a=315.83\)`
  - `\(\epsilon=0.202\)` Andres et alii (2014)
`$$\Rightarrow c=920M$$` 
]
.pull-right.center[
`\(CAP=100\)`

| Perf | `\(\theta\)`    | `\(\frac{\theta}{CAP}\)` | `\(\pi^a\)`  |
|---------|-------------|----------------------|----------|
| 0.798   | 120,200,000 | 1.20                 | 270.13 |
| 0.8     | 120,200,000 | 1.20                 | 270.13 |
| 0.85    | 113,654,321 | 1.14                 | 25.75  |
| 0.9     | 113,568,965 | 1.14                 | 93.65  |
| 0.95    | 118,470,479 | 1.18                 | 188.86 |
| 0.99    | 114,916,396 | 1.15                 | 298.11 |
| 1       | 118,332,486 | 1.18                 | 317.24 |
]

---
# Results: Profit oriented and multiple CAPs, `\(Perf=0.8\)`

| CAP           | `\(\theta\)`    | `\(\frac{\theta}{CAP}\)` | `\(\pi^a\)`  |
|---------------|-------------|----------------------|----------|
| 100,000,000   | 120,200,000 | 1.20                 | 270.13 |
| 200,000,000   | 240,400,000 | 1.20                 | 60.57  |
| 300,000,000   | 360,600,000 | 1.20                 | 119.47 |
| 400,000,000   | 454,798,037 | 1.14                 | 95.83  |
| 500,000,000   | 601,000,000 | 1.20                 | 79.31  |
| 600,000,000   | 605,279,899 | 1.01                 | 66.57  |
| 700,000,000   | 605,279,899 | 0.86                 | 56.37  |
| 800,000,000   | 961,600,000 | 1.20                 | 152.50 |
| 900,000,000   | 605,279,899 | 0.67                 | 42.26  |
| 1,000,000,000 | 605,279,899 | 0.61                 | 35.98  |
---
# Results: Profit oriented, allowances distributions

.pull-left[
&lt;img src="diststage1.png" width="100%" style="display: block; margin: auto;" /&gt;
]

.pull-right[
&lt;img src="diststage2.png" width="100%" style="display: block; margin: auto;" /&gt;
]


---
name: resultsW
# Results: Welfare oriented
.pull-left[
- Calibration wrt [Amigo, Cea-Echenique, and Feijoo (2021)](#bib-amigo_two_2021)
  - CAP: `\(100 MtCO_2\)`
  - `\(\pi^a=315.83\)`

`$$\Rightarrow c=9920M$$` 
]
.pull-right.center[
| CAP  (M)         | `\(\theta\)`    | Perf | `\(\frac{\theta}{CAP}\)` | `\(\pi^a\)`  |
|---------------|-------------|---------|----------------------|----------|
| 100   | 144,944,410 | 0.798   | 1.449                | 232.82 |
| 200   | 289,888,820 | 0.798   | 1.449                | 141.56 |
| 300   | 434,833,230 | 0.798   | 1.449                | 103.33 |
| 400   | 579,777,640 | 0.798   | 1.449                |    |
| 500   | 653,754,577 | 0.905   | 1.308                | 37.27  |
| 600   | 619,939,821 | 0.999   | 1.033                | 40.43  |
| 700   | 661,258,561 | 0.997   | 0.945                | 36.42  |
| 800   | 610,913,181 | 0.944   | 0.764                | 31.28  |
| 900   | 609,127,279 | 0.896   | 0.677                | 31.21  |
| 1,000 | 698,676,376 | 0.909   | 0.699                | 30.00  |
]
---
class: middle
name: remarks
# Final Remarks

- Respect of aggregate demand law
- Unclear relation of inattention
- Multiple solutions and comparative statics


---
name: references
# References

.pull-left[
.small[
&lt;a name=bib-abada_multiplicity_2017&gt;&lt;/a&gt;[Abada, I., G. de Maere d '
Aertrycke, and Y. Smeers](#cite-abada_multiplicity_2017) (2017). "On the
multiplicity of solutions in generation capacity investment models with
incomplete markets: a risk-averse stochastic equilibrium approach". En. In:
_Mathematical Programming_ 165.1, pp. 5-69. ISSN: 1436-4646. DOI:
[10.1007/s10107-017-1185-9](https://doi.org/10.1007%2Fs10107-017-1185-9).
URL:
[https://doi.org/10.1007/s10107-017-1185-9](https://doi.org/10.1007/s10107-017-1185-9)
(visited on May. 26, 2020).

&lt;a name=bib-amigo_two_2021&gt;&lt;/a&gt;[Amigo, P., S. Cea-Echenique, and F.
Feijoo](#cite-amigo_two_2021) (2021). "A two stage cap-and-trade model with
allowance re-trading and capacity investment: The case of the Chilean NDC
targets". En. In: _Energy_ 224, p. 120129. ISSN: 03605442. DOI:
[10.1016/j.energy.2021.120129](https://doi.org/10.1016%2Fj.energy.2021.120129).
URL:
[https://linkinghub.elsevier.com/retrieve/pii/S0360544221003789](https://linkinghub.elsevier.com/retrieve/pii/S0360544221003789)
(visited on Mar. 10, 2021).
]
]

.pull-right[
.small[

&lt;a name=bib-cea-echenique_general_2018&gt;&lt;/a&gt;[Cea-Echenique, S. and J. P.
Torres-Martínez](#cite-cea-echenique_general_2018) (2018). "General
equilibrium with endogenous trading constraints". In: _PLoS ONE_ 13.9. ISSN:
1932-6203. DOI:
[10.1371/journal.pone.0203814](https://doi.org/10.1371%2Fjournal.pone.0203814).
URL:
[https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6141088/](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6141088/)
(visited on Mar. 09, 2020).

&lt;a name=bib-de_maere_d__aertrycke_risk_2017&gt;&lt;/a&gt;[de Maere d ' Aertrycke, G.,
A. Ehrenmann, D. Ralph, et al.](#cite-de_maere_d__aertrycke_risk_2017)
(2017). _Risk trading in capacity equilibrium models_. En. Working Paper.
University of Cambridge. DOI:
[10.17863/CAM.17552](https://doi.org/10.17863%2FCAM.17552). URL:
[https://www.repository.cam.ac.uk/handle/1810/270625](https://www.repository.cam.ac.uk/handle/1810/270625)
(visited on May. 27, 2020).

&lt;a name=bib-dewan_estimating_2020&gt;&lt;/a&gt;[Dewan, A. and N.
Neligh](#cite-dewan_estimating_2020) (2020). "Estimating information cost
functions in models of rational inattention". En. In: _Journal of Economic
Theory_ 187, p. 105011. ISSN: 00220531. DOI:
[10.1016/j.jet.2020.105011](https://doi.org/10.1016%2Fj.jet.2020.105011).
URL:
[https://linkinghub.elsevier.com/retrieve/pii/S002205311830396X](https://linkinghub.elsevier.com/retrieve/pii/S002205311830396X)
(visited on Mar. 23, 2021).
]
]


---
name: references2
# References II


&lt;a name=bib-ehrenmann_stochastic_2011&gt;&lt;/a&gt;[Ehrenmann, A. and Y.
Smeers](#cite-ehrenmann_stochastic_2011) (2011b). "Stochastic Equilibrium
Models for Generation Capacity Expansion". En. In: _Stochastic Optimization
Methods in Finance and Energy: New Financial Products and Energy Market
Strategies_. Ed. by M. Bertocchi, G. Consigli and M. A. H. Dempster.
International Series in Operations Research &amp; Management Science. New York,
NY: Springer, pp. 273-310. ISBN: 978-1-4419-9586-5. DOI:
[10.1007/978-1-4419-9586-5_13](https://doi.org/10.1007%2F978-1-4419-9586-5_13).
URL:
[https://doi.org/10.1007/978-1-4419-9586-5_13](https://doi.org/10.1007/978-1-4419-9586-5_13)
(visited on Apr. 11, 2020).


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
